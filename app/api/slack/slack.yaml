get:
  summary: Slack API関連情報取得エンドポイント
  description: |
    クエリパラメータの`action`に応じて、Slackコミュニティに関する様々な情報を取得します。
    - `action`が指定されない場合、すべてのコミュニティカテゴリ情報を返します。
    - `action=new-members-count`と`category`を指定すると、指定カテゴリの新規メンバー数を返します。
    - `action=member-count`と`category`を指定すると、指定カテゴリの総メンバー数を返します。
    - `action=general-member-count`を指定すると、generalチャンネルの総メンバー数を返します。
    メンバー数情報はキャッシュされ、再検証間隔は1時間です。
  tags:
    - Slack
  parameters:
    - name: action
      in: query
      required: false
      schema:
        type: string
        enum:
          - new-members-count
          - member-count
          - general-member-count
      description: 実行するアクション。指定がない場合は全てのカテゴリ情報を返します。
    - name: category
      in: query
      required: false
      schema:
        type: string
      description: "`action`が`new-members-count`または`member-count`の場合に必須となるカテゴリ名。"
  responses:
    "200":
      description: 正常な応答。応答スキーマは`action`パラメータによって異なります。
      content:
        application/json:
          schema:
            oneOf:
              - title: All Categories Response
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        name:
                          type: string
                        members:
                          type: number
                        newMembers:
                          type: number
              - title: New Members Count Response
                type: object
                properties:
                  category:
                    type: string
                  newMembersCount:
                    type: number
                  cached:
                    type: boolean
              - title: Member Count Response
                type: object
                properties:
                  category:
                    type: string
                  memberCount:
                    type: number
                  cached:
                    type: boolean
              - title: General Member Count Response
                type: object
                properties:
                  success:
                    type: boolean
                  memberCount:
                    type: number
                  source:
                    type: string
                    enum:
                      - slack_api
                      - default
                      - error
                  error:
                    type: string
                    nullable: true
    "400":
      description: 必須のクエリパラメータが不足している、または無効な値が指定された場合の応答
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
    "500":
      $ref: "../../../swagger.yaml#/components/responses/InternalServerError"
