get:
  summary: AIエージェント用データベースのセットアップ状態を確認
  tags:
    - AI Agent
  description: |
    SupabaseにAIエージェントに必要なテーブル（visa_types, visa_information, chat_sessions, messages）が
    存在するかどうかを確認します。テーブルが存在しない場合、手動でセットアップするためのSQLスクリプトを返します。
  responses:
    "200":
      description: |
        テーブルの存在確認が完了した際の応答。
      content:
        application/json:
          schema:
            oneOf:
              - type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "AIエージェント用のテーブルは既に存在します"
                  tables:
                    type: array
                    description: 既存のテーブルのダミーデータ
                    items:
                      type: object
                      properties:
                        id:
                          type: string
              - type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "テーブルが存在しません。Supabaseダッシュボードで以下のSQLを実行してください。"
                  sql:
                    type: string
                    description: テーブルを作成するためのSQLスクリプト
    "500":
      $ref: "../../../../swagger.yaml#/components/responses/InternalServerError"
